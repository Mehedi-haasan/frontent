"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_aws-amplify_ui-components_dist_esm-es5_amplify-amazon-button_5_entry_js"],{

/***/ "./node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-amazon-button_5.entry.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-amazon-button_5.entry.js ***!
  \***********************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   amplify_amazon_button: function() { return /* binding */ AmplifyAmazonButton; },\n/* harmony export */   amplify_auth0_button: function() { return /* binding */ AmplifyAuth0Button; },\n/* harmony export */   amplify_facebook_button: function() { return /* binding */ AmplifyFacebookButton; },\n/* harmony export */   amplify_google_button: function() { return /* binding */ AmplifyGoogleButton; },\n/* harmony export */   amplify_oauth_button: function() { return /* binding */ AmplifyOAuthButton; }\n/* harmony export */ });\n/* harmony import */ var _index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-83f2275b.js */ \"./node_modules/@aws-amplify/ui-components/dist/esm-es5/index-83f2275b.js\");\n/* harmony import */ var _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-amplify/core */ \"./node_modules/@aws-amplify/core/lib-esm/index.js\");\n/* harmony import */ var _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth-types-78df304e.js */ \"./node_modules/@aws-amplify/ui-components/dist/esm-es5/auth-types-78df304e.js\");\n/* harmony import */ var _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-amplify/auth */ \"./node_modules/@aws-amplify/auth/lib-esm/index.js\");\n/* harmony import */ var _Translations_108d469f_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Translations-108d469f.js */ \"./node_modules/@aws-amplify/ui-components/dist/esm-es5/Translations-108d469f.js\");\n/* harmony import */ var _constants_c8ecaa24_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants-c8ecaa24.js */ \"./node_modules/@aws-amplify/ui-components/dist/esm-es5/constants-c8ecaa24.js\");\n/* harmony import */ var _helpers_14fcb50c_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers-14fcb50c.js */ \"./node_modules/@aws-amplify/ui-components/dist/esm-es5/helpers-14fcb50c.js\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\n\n\n\nvar logger = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.ConsoleLogger('amplify-amazon-button');\nvar AmplifyAmazonButton = /** @class */ (function () {\n    function class_1(hostRef) {\n        var _this = this;\n        (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);\n        /** Auth state change handler for this component\n         * e.g. SignIn -> 'Create Account' link -> SignUp\n         */\n        this.handleAuthStateChange = _helpers_14fcb50c_js__WEBPACK_IMPORTED_MODULE_4__.d;\n        this.federatedSignIn = function (response) {\n            var access_token = response.access_token, expires_in = response.expires_in;\n            if (!access_token) {\n                return;\n            }\n            if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth ||\n                typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.federatedSignIn !== 'function' ||\n                typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.currentAuthenticatedUser !== 'function') {\n                throw new Error(_constants_c8ecaa24_js__WEBPACK_IMPORTED_MODULE_3__.N);\n            }\n            var date = new Date();\n            var expires_at = expires_in * 1000 + date.getTime();\n            window['amazon'].Login.retrieveProfile(function (userInfo) { return __awaiter(_this, void 0, void 0, function () {\n                var user, authenticatedUser;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (!userInfo.success) {\n                                return [2 /*return*/, logger.debug('Get user Info failed')];\n                            }\n                            user = {\n                                name: userInfo.profile.Name,\n                                email: userInfo.profile.PrimaryEmail,\n                            };\n                            return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.federatedSignIn('amazon', { token: access_token, expires_at: expires_at }, user)];\n                        case 1:\n                            _a.sent();\n                            return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.currentAuthenticatedUser()];\n                        case 2:\n                            authenticatedUser = _a.sent();\n                            this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__.A.SignedIn, authenticatedUser);\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        };\n    }\n    /**\n     * @see https://developer.amazon.com/docs/login-with-amazon/install-sdk-javascript.html\n     */\n    class_1.prototype.signInWithAmazon = function (event) {\n        var _this = this;\n        event.preventDefault();\n        window['amazon'].Login.setClientId(this.clientId);\n        window['amazon'].Login.authorize({ scope: 'profile' }, function (response) {\n            if (response.error) {\n                return logger.debug('Failed to login with amazon: ' + response.error);\n            }\n            try {\n                window.localStorage.setItem(_constants_c8ecaa24_js__WEBPACK_IMPORTED_MODULE_3__.h, JSON.stringify({ provider: 'amazon' }));\n            }\n            catch (e) {\n                logger.debug('Failed to cache auth source into localStorage', e);\n            }\n            _this.federatedSignIn(response);\n        });\n    };\n    class_1.prototype.render = function () {\n        var _this = this;\n        return ((0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithAmazon(event); }, provider: \"amazon\" }, (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"script\", { src: \"https://assets.loginwithamazon.com/sdk/na/login1.js\" }), _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.I18n.get(_Translations_108d469f_js__WEBPACK_IMPORTED_MODULE_2__.T.SIGN_IN_WITH_AMAZON)));\n    };\n    return class_1;\n}());\nvar logger$1 = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.ConsoleLogger('amplify-auth0-button');\nvar AmplifyAuth0Button = /** @class */ (function () {\n    function class_2(hostRef) {\n        var _this = this;\n        (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);\n        /** Auth state change handler for this component */\n        this.handleAuthStateChange = _helpers_14fcb50c_js__WEBPACK_IMPORTED_MODULE_4__.d;\n        this.handleLoad = function () {\n            // @ts-ignore Property 'auth0' does not exist on type '{}'.\n            var _a = _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.configure().oauth, oauth = _a === void 0 ? {} : _a;\n            // @ts-ignore Property 'auth0' does not exist on type '{}'.\n            var _b = _this.config, config = _b === void 0 ? oauth.auth0 : _b;\n            if (!config) {\n                logger$1.debug('Auth0 is not configured');\n                return;\n            }\n            logger$1.debug('auth0 configuration', config);\n            if (!_this._auth0) {\n                _this._auth0 = new window['auth0'].WebAuth(config);\n            }\n            _this._auth0.parseHash(function (err, authResult) {\n                if (err) {\n                    logger$1.debug('Failed to parse the url for Auth0', err);\n                    return;\n                }\n                if (!authResult) {\n                    logger$1.debug('Auth0 found no authResult in hash');\n                    return;\n                }\n                var payload = {\n                    provider: 'auth0',\n                    opts: {\n                        returnTo: config.returnTo,\n                        clientID: config.clientID,\n                        federated: config.federated,\n                    },\n                };\n                try {\n                    localStorage.setItem(_constants_c8ecaa24_js__WEBPACK_IMPORTED_MODULE_3__.h, JSON.stringify(payload));\n                }\n                catch (e) {\n                    logger$1.debug('Failed to cache auth source into localStorage', e);\n                }\n                _this._auth0.client.userInfo(authResult.accessToken, function (err, user) { return __awaiter(_this, void 0, void 0, function () {\n                    var username, email, authenticatedUser;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                username = undefined;\n                                email = undefined;\n                                if (err) {\n                                    logger$1.debug('Failed to get the user info', err);\n                                }\n                                else {\n                                    username = user.name;\n                                    email = user.email;\n                                }\n                                return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.federatedSignIn(config.domain, {\n                                        token: authResult.idToken,\n                                        expires_at: authResult.expiresIn * 1000 + new Date().getTime(),\n                                    }, { name: username, email: email })];\n                            case 1:\n                                _a.sent();\n                                return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.currentAuthenticatedUser()];\n                            case 2:\n                                authenticatedUser = _a.sent();\n                                this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__.A.SignedIn, authenticatedUser);\n                                return [2 /*return*/];\n                        }\n                    });\n                }); });\n            });\n        };\n    }\n    class_2.prototype.signInWithAuth0 = function (event) {\n        event.preventDefault();\n        if (!this._auth0) {\n            throw new Error('the auth0 client is not configured');\n        }\n        this._auth0.authorize();\n    };\n    class_2.prototype.render = function () {\n        var _this = this;\n        return ((0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithAuth0(event); }, provider: \"auth0\" }, (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"script\", { onLoad: this.handleLoad, src: \"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js\" }), _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.I18n.get(_Translations_108d469f_js__WEBPACK_IMPORTED_MODULE_2__.T.SIGN_IN_WITH_AUTH0)));\n    };\n    return class_2;\n}());\nvar logger$2 = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.ConsoleLogger('amplify-facebook-button');\nvar AmplifyFacebookButton = /** @class */ (function () {\n    function class_3(hostRef) {\n        var _this = this;\n        (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);\n        /** Auth state change handler for this component\n         * e.g. SignIn -> 'Create Account' link -> SignUp\n         */\n        this.handleAuthStateChange = _helpers_14fcb50c_js__WEBPACK_IMPORTED_MODULE_4__.d;\n        this.federatedSignIn = function (authResponse) {\n            var accessToken = authResponse.accessToken, expiresIn = authResponse.expiresIn;\n            if (!accessToken) {\n                return;\n            }\n            if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth ||\n                typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.federatedSignIn !== 'function' ||\n                typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.currentAuthenticatedUser !== 'function') {\n                throw new Error(_constants_c8ecaa24_js__WEBPACK_IMPORTED_MODULE_3__.N);\n            }\n            var date = new Date();\n            var expires_at = expiresIn * 1000 + date.getTime();\n            var fields = 'name,email';\n            window['FB'].api('/me', { fields: fields }, function (response) { return __awaiter(_this, void 0, void 0, function () {\n                var user, authenticatedUser;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            user = {\n                                name: response.name,\n                                email: response.email,\n                            };\n                            return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.federatedSignIn('facebook', { token: accessToken, expires_at: expires_at }, user)];\n                        case 1:\n                            _a.sent();\n                            return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.currentAuthenticatedUser()];\n                        case 2:\n                            authenticatedUser = _a.sent();\n                            this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__.A.SignedIn, authenticatedUser);\n                            return [2 /*return*/];\n                    }\n                });\n            }); });\n        };\n        this.getLoginStatus = function () {\n            window['FB'].getLoginStatus(function (response) {\n                try {\n                    window.localStorage.setItem(_constants_c8ecaa24_js__WEBPACK_IMPORTED_MODULE_3__.h, JSON.stringify({ provider: 'facebook' }));\n                }\n                catch (e) {\n                    logger$2.debug('Failed to cache auth source into localStorage', e);\n                }\n                if (response.status === 'connected') {\n                    return _this.federatedSignIn(response.authResponse);\n                }\n                _this.login();\n            });\n        };\n        this.login = function () {\n            var scope = 'public_profile,email';\n            window['FB'].login(function (response) {\n                if (response && response.authResponse) {\n                    _this.federatedSignIn(response.authResponse);\n                }\n            }, { scope: scope });\n        };\n    }\n    /**\n     * @see https://developers.facebook.com/docs/javascript/reference/FB.init/v5.0\n     */\n    class_3.prototype.signInWithFacebook = function (event) {\n        event.preventDefault();\n        window['FB'].init({\n            appId: this.appId,\n            cookie: true,\n            xfbml: false,\n            version: 'v5.0',\n        });\n        this.getLoginStatus();\n    };\n    class_3.prototype.render = function () {\n        var _this = this;\n        return ((0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithFacebook(event); }, provider: \"facebook\" }, (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"script\", { async: true, defer: true, src: \"https://connect.facebook.net/en_US/sdk.js\" }), _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.I18n.get(_Translations_108d469f_js__WEBPACK_IMPORTED_MODULE_2__.T.SIGN_IN_WITH_FACEBOOK)));\n    };\n    return class_3;\n}());\nvar logger$3 = new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.ConsoleLogger('amplify-google-button');\nvar AmplifyGoogleButton = /** @class */ (function () {\n    function class_4(hostRef) {\n        var _this = this;\n        (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);\n        /** Auth state change handler for this component\n         * e.g. SignIn -> 'Create Account' link -> SignUp\n         */\n        this.handleAuthStateChange = _helpers_14fcb50c_js__WEBPACK_IMPORTED_MODULE_4__.d;\n        this.handleError = function (error) {\n            console.error(error);\n        };\n        /**\n         * @see https://developers.google.com/identity/sign-in/web/build-button#building_a_button_with_a_custom_graphic\n         */\n        this.handleLoad = function () {\n            window['gapi'].load('auth2');\n        };\n        this.handleUser = function (user) { return __awaiter(_this, void 0, void 0, function () {\n            var _a, id_token, expires_at, profile, authenticatedUser;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth ||\n                            typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.federatedSignIn !== 'function' ||\n                            typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.currentAuthenticatedUser !== 'function') {\n                            throw new Error(_constants_c8ecaa24_js__WEBPACK_IMPORTED_MODULE_3__.N);\n                        }\n                        try {\n                            window.localStorage.setItem(_constants_c8ecaa24_js__WEBPACK_IMPORTED_MODULE_3__.h, JSON.stringify({ provider: 'google' }));\n                        }\n                        catch (e) {\n                            logger$3.debug('Failed to cache auth source into localStorage', e);\n                        }\n                        _a = user.getAuthResponse(), id_token = _a.id_token, expires_at = _a.expires_at;\n                        profile = user.getBasicProfile();\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.federatedSignIn('google', { token: id_token, expires_at: expires_at }, {\n                                email: profile.getEmail(),\n                                name: profile.getName(),\n                                picture: profile.getImageUrl(),\n                            })];\n                    case 1:\n                        _b.sent();\n                        return [4 /*yield*/, _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.currentAuthenticatedUser()];\n                    case 2:\n                        authenticatedUser = _b.sent();\n                        try {\n                            this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_1__.A.SignedIn, authenticatedUser);\n                        }\n                        catch (error) {\n                            this.handleError(error);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n    }\n    class_4.prototype.getAuthInstance = function () {\n        if (window['gapi'] && window['gapi'].auth2) {\n            return (window['gapi'].auth2.getAuthInstance() ||\n                window['gapi'].auth2.init({\n                    client_id: this.clientId,\n                    cookiepolicy: 'single_host_origin',\n                    scope: 'profile email openid',\n                }));\n        }\n        return null;\n    };\n    class_4.prototype.signInWithGoogle = function (event) {\n        event.preventDefault();\n        this.getAuthInstance()\n            .signIn()\n            .then(this.handleUser)\n            .catch(this.handleError);\n    };\n    class_4.prototype.render = function () {\n        var _this = this;\n        return ((0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithGoogle(event); }, provider: \"google\" }, (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"script\", { onLoad: this.handleLoad, src: \"https://apis.google.com/js/api:client.js\" }), _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.I18n.get(_Translations_108d469f_js__WEBPACK_IMPORTED_MODULE_2__.T.SIGN_IN_WITH_GOOGLE)));\n    };\n    return class_4;\n}());\nvar AmplifyOAuthButton = /** @class */ (function () {\n    function AmplifyOAuthButton(hostRef) {\n        (0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);\n        /** Federated credentials & configuration. */\n        this.config = {};\n    }\n    AmplifyOAuthButton.prototype.signInWithOAuth = function (event) {\n        event.preventDefault();\n        _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.Auth.federatedSignIn();\n    };\n    AmplifyOAuthButton.prototype.render = function () {\n        var _this = this;\n        return ((0,_index_83f2275b_js__WEBPACK_IMPORTED_MODULE_0__.h)(\"amplify-sign-in-button\", { onClick: function (event) { return _this.signInWithOAuth(event); }, provider: \"oauth\" }, this.config.label || _aws_amplify_core__WEBPACK_IMPORTED_MODULE_5__.I18n.get(_Translations_108d469f_js__WEBPACK_IMPORTED_MODULE_2__.T.SIGN_IN_WITH_AWS)));\n    };\n    return AmplifyOAuthButton;\n}());\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGF3cy1hbXBsaWZ5L3VpLWNvbXBvbmVudHMvZGlzdC9lc20tZXM1L2FtcGxpZnktYW1hem9uLWJ1dHRvbl81LmVudHJ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGlCQUFpQixTQUFJLElBQUksU0FBSTtBQUM3Qiw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBLG1CQUFtQixTQUFJLElBQUksU0FBSTtBQUMvQixjQUFjLDZCQUE2QiwwQkFBMEIsY0FBYyxxQkFBcUI7QUFDeEcsaUJBQWlCLG9EQUFvRCxxRUFBcUUsY0FBYztBQUN4Six1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxtQ0FBbUMsU0FBUztBQUM1QyxtQ0FBbUMsV0FBVyxVQUFVO0FBQ3hELDBDQUEwQyxjQUFjO0FBQ3hEO0FBQ0EsOEdBQThHLE9BQU87QUFDckgsaUZBQWlGLGlCQUFpQjtBQUNsRyx5REFBeUQsZ0JBQWdCLFFBQVE7QUFDakYsK0NBQStDLGdCQUFnQixnQkFBZ0I7QUFDL0U7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBLFVBQVUsWUFBWSxhQUFhLFNBQVMsVUFBVTtBQUN0RCxvQ0FBb0MsU0FBUztBQUM3QztBQUNBO0FBQytEO0FBQ1A7QUFDRTtBQUNqQjtBQUNzQjtBQUMyQjtBQUNoQjtBQUMxRSxpQkFBaUIsNERBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsUUFBUSxxREFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLG1EQUE0QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1EQUFJO0FBQ3JCLHVCQUF1QixtREFBSTtBQUMzQix1QkFBdUIsbURBQUk7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Q3pQO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFFBQVEscURBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG1EQUFJO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFDLDZCQUE2Qiw0QkFBNEIsc0NBQXNDLHFCQUFxQix1QkFBdUIsbURBQUksS0FBSyx3REFBWTtBQUNqTDtBQUNBO0FBQ0EsQ0FBQztBQUMrTyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQGF3cy1hbXBsaWZ5L3VpLWNvbXBvbmVudHMvZGlzdC9lc20tZXM1L2FtcGxpZnktYW1hem9uLWJ1dHRvbl81LmVudHJ5LmpzPzVlYWQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgaCB9IGZyb20gJy4vaW5kZXgtODNmMjI3NWIuanMnO1xuaW1wb3J0IHsgQ29uc29sZUxvZ2dlciwgSTE4biB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9jb3JlJztcbmltcG9ydCB7IEEgYXMgQXV0aFN0YXRlIH0gZnJvbSAnLi9hdXRoLXR5cGVzLTc4ZGYzMDRlLmpzJztcbmltcG9ydCB7IEF1dGggfSBmcm9tICdAYXdzLWFtcGxpZnkvYXV0aCc7XG5pbXBvcnQgeyBUIGFzIFRyYW5zbGF0aW9ucyB9IGZyb20gJy4vVHJhbnNsYXRpb25zLTEwOGQ0NjlmLmpzJztcbmltcG9ydCB7IE4gYXMgTk9fQVVUSF9NT0RVTEVfRk9VTkQsIGggYXMgQVVUSF9TT1VSQ0VfS0VZIH0gZnJvbSAnLi9jb25zdGFudHMtYzhlY2FhMjQuanMnO1xuaW1wb3J0IHsgZCBhcyBkaXNwYXRjaEF1dGhTdGF0ZUNoYW5nZUV2ZW50IH0gZnJvbSAnLi9oZWxwZXJzLTE0ZmNiNTBjLmpzJztcbnZhciBsb2dnZXIgPSBuZXcgQ29uc29sZUxvZ2dlcignYW1wbGlmeS1hbWF6b24tYnV0dG9uJyk7XG52YXIgQW1wbGlmeUFtYXpvbkJ1dHRvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjbGFzc18xKGhvc3RSZWYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgLyoqIEF1dGggc3RhdGUgY2hhbmdlIGhhbmRsZXIgZm9yIHRoaXMgY29tcG9uZW50XG4gICAgICAgICAqIGUuZy4gU2lnbkluIC0+ICdDcmVhdGUgQWNjb3VudCcgbGluayAtPiBTaWduVXBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlID0gZGlzcGF0Y2hBdXRoU3RhdGVDaGFuZ2VFdmVudDtcbiAgICAgICAgdGhpcy5mZWRlcmF0ZWRTaWduSW4gPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHZhciBhY2Nlc3NfdG9rZW4gPSByZXNwb25zZS5hY2Nlc3NfdG9rZW4sIGV4cGlyZXNfaW4gPSByZXNwb25zZS5leHBpcmVzX2luO1xuICAgICAgICAgICAgaWYgKCFhY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIUF1dGggfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgQXV0aC5mZWRlcmF0ZWRTaWduSW4gIT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgICAgICAgICB0eXBlb2YgQXV0aC5jdXJyZW50QXV0aGVudGljYXRlZFVzZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTk9fQVVUSF9NT0RVTEVfRk9VTkQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgdmFyIGV4cGlyZXNfYXQgPSBleHBpcmVzX2luICogMTAwMCArIGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgICAgd2luZG93WydhbWF6b24nXS5Mb2dpbi5yZXRyaWV2ZVByb2ZpbGUoZnVuY3Rpb24gKHVzZXJJbmZvKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVzZXIsIGF1dGhlbnRpY2F0ZWRVc2VyO1xuICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXNlckluZm8uc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgbG9nZ2VyLmRlYnVnKCdHZXQgdXNlciBJbmZvIGZhaWxlZCcpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdXNlckluZm8ucHJvZmlsZS5OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdXNlckluZm8ucHJvZmlsZS5QcmltYXJ5RW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBBdXRoLmZlZGVyYXRlZFNpZ25JbignYW1hem9uJywgeyB0b2tlbjogYWNjZXNzX3Rva2VuLCBleHBpcmVzX2F0OiBleHBpcmVzX2F0IH0sIHVzZXIpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQXV0aC5jdXJyZW50QXV0aGVudGljYXRlZFVzZXIoKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlZFVzZXIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlNpZ25lZEluLCBhdXRoZW50aWNhdGVkVXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIuYW1hem9uLmNvbS9kb2NzL2xvZ2luLXdpdGgtYW1hem9uL2luc3RhbGwtc2RrLWphdmFzY3JpcHQuaHRtbFxuICAgICAqL1xuICAgIGNsYXNzXzEucHJvdG90eXBlLnNpZ25JbldpdGhBbWF6b24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgd2luZG93WydhbWF6b24nXS5Mb2dpbi5zZXRDbGllbnRJZCh0aGlzLmNsaWVudElkKTtcbiAgICAgICAgd2luZG93WydhbWF6b24nXS5Mb2dpbi5hdXRob3JpemUoeyBzY29wZTogJ3Byb2ZpbGUnIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlci5kZWJ1ZygnRmFpbGVkIHRvIGxvZ2luIHdpdGggYW1hem9uOiAnICsgcmVzcG9uc2UuZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oQVVUSF9TT1VSQ0VfS0VZLCBKU09OLnN0cmluZ2lmeSh7IHByb3ZpZGVyOiAnYW1hem9uJyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnRmFpbGVkIHRvIGNhY2hlIGF1dGggc291cmNlIGludG8gbG9jYWxTdG9yYWdlJywgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5mZWRlcmF0ZWRTaWduSW4ocmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGNsYXNzXzEucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKFwiYW1wbGlmeS1zaWduLWluLWJ1dHRvblwiLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuc2lnbkluV2l0aEFtYXpvbihldmVudCk7IH0sIHByb3ZpZGVyOiBcImFtYXpvblwiIH0sIGgoXCJzY3JpcHRcIiwgeyBzcmM6IFwiaHR0cHM6Ly9hc3NldHMubG9naW53aXRoYW1hem9uLmNvbS9zZGsvbmEvbG9naW4xLmpzXCIgfSksIEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5TSUdOX0lOX1dJVEhfQU1BWk9OKSkpO1xuICAgIH07XG4gICAgcmV0dXJuIGNsYXNzXzE7XG59KCkpO1xudmFyIGxvZ2dlciQxID0gbmV3IENvbnNvbGVMb2dnZXIoJ2FtcGxpZnktYXV0aDAtYnV0dG9uJyk7XG52YXIgQW1wbGlmeUF1dGgwQnV0dG9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGNsYXNzXzIoaG9zdFJlZikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgICAgICAvKiogQXV0aCBzdGF0ZSBjaGFuZ2UgaGFuZGxlciBmb3IgdGhpcyBjb21wb25lbnQgKi9cbiAgICAgICAgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UgPSBkaXNwYXRjaEF1dGhTdGF0ZUNoYW5nZUV2ZW50O1xuICAgICAgICB0aGlzLmhhbmRsZUxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlIFByb3BlcnR5ICdhdXRoMCcgZG9lcyBub3QgZXhpc3Qgb24gdHlwZSAne30nLlxuICAgICAgICAgICAgdmFyIF9hID0gQXV0aC5jb25maWd1cmUoKS5vYXV0aCwgb2F1dGggPSBfYSA9PT0gdm9pZCAwID8ge30gOiBfYTtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgUHJvcGVydHkgJ2F1dGgwJyBkb2VzIG5vdCBleGlzdCBvbiB0eXBlICd7fScuXG4gICAgICAgICAgICB2YXIgX2IgPSBfdGhpcy5jb25maWcsIGNvbmZpZyA9IF9iID09PSB2b2lkIDAgPyBvYXV0aC5hdXRoMCA6IF9iO1xuICAgICAgICAgICAgaWYgKCFjb25maWcpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIkMS5kZWJ1ZygnQXV0aDAgaXMgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2dnZXIkMS5kZWJ1ZygnYXV0aDAgY29uZmlndXJhdGlvbicsIGNvbmZpZyk7XG4gICAgICAgICAgICBpZiAoIV90aGlzLl9hdXRoMCkge1xuICAgICAgICAgICAgICAgIF90aGlzLl9hdXRoMCA9IG5ldyB3aW5kb3dbJ2F1dGgwJ10uV2ViQXV0aChjb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuX2F1dGgwLnBhcnNlSGFzaChmdW5jdGlvbiAoZXJyLCBhdXRoUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMS5kZWJ1ZygnRmFpbGVkIHRvIHBhcnNlIHRoZSB1cmwgZm9yIEF1dGgwJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWF1dGhSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyJDEuZGVidWcoJ0F1dGgwIGZvdW5kIG5vIGF1dGhSZXN1bHQgaW4gaGFzaCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogJ2F1dGgwJyxcbiAgICAgICAgICAgICAgICAgICAgb3B0czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuVG86IGNvbmZpZy5yZXR1cm5UbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudElEOiBjb25maWcuY2xpZW50SUQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWRlcmF0ZWQ6IGNvbmZpZy5mZWRlcmF0ZWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShBVVRIX1NPVVJDRV9LRVksIEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyJDEuZGVidWcoJ0ZhaWxlZCB0byBjYWNoZSBhdXRoIHNvdXJjZSBpbnRvIGxvY2FsU3RvcmFnZScsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfdGhpcy5fYXV0aDAuY2xpZW50LnVzZXJJbmZvKGF1dGhSZXN1bHQuYWNjZXNzVG9rZW4sIGZ1bmN0aW9uIChlcnIsIHVzZXIpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJuYW1lLCBlbWFpbCwgYXV0aGVudGljYXRlZFVzZXI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyJDEuZGVidWcoJ0ZhaWxlZCB0byBnZXQgdGhlIHVzZXIgaW5mbycsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSA9IHVzZXIubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsID0gdXNlci5lbWFpbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBBdXRoLmZlZGVyYXRlZFNpZ25Jbihjb25maWcuZG9tYWluLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IGF1dGhSZXN1bHQuaWRUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVzX2F0OiBhdXRoUmVzdWx0LmV4cGlyZXNJbiAqIDEwMDAgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHsgbmFtZTogdXNlcm5hbWUsIGVtYWlsOiBlbWFpbCB9KV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEF1dGguY3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyKCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRlZFVzZXIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKEF1dGhTdGF0ZS5TaWduZWRJbiwgYXV0aGVudGljYXRlZFVzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pOyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBjbGFzc18yLnByb3RvdHlwZS5zaWduSW5XaXRoQXV0aDAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCF0aGlzLl9hdXRoMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd0aGUgYXV0aDAgY2xpZW50IGlzIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYXV0aDAuYXV0aG9yaXplKCk7XG4gICAgfTtcbiAgICBjbGFzc18yLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChcImFtcGxpZnktc2lnbi1pbi1idXR0b25cIiwgeyBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLnNpZ25JbldpdGhBdXRoMChldmVudCk7IH0sIHByb3ZpZGVyOiBcImF1dGgwXCIgfSwgaChcInNjcmlwdFwiLCB7IG9uTG9hZDogdGhpcy5oYW5kbGVMb2FkLCBzcmM6IFwiaHR0cHM6Ly9jZG4uYXV0aDAuY29tL2pzL2F1dGgwLzkuMTEvYXV0aDAubWluLmpzXCIgfSksIEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5TSUdOX0lOX1dJVEhfQVVUSDApKSk7XG4gICAgfTtcbiAgICByZXR1cm4gY2xhc3NfMjtcbn0oKSk7XG52YXIgbG9nZ2VyJDIgPSBuZXcgQ29uc29sZUxvZ2dlcignYW1wbGlmeS1mYWNlYm9vay1idXR0b24nKTtcbnZhciBBbXBsaWZ5RmFjZWJvb2tCdXR0b24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gY2xhc3NfMyhob3N0UmVmKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIC8qKiBBdXRoIHN0YXRlIGNoYW5nZSBoYW5kbGVyIGZvciB0aGlzIGNvbXBvbmVudFxuICAgICAgICAgKiBlLmcuIFNpZ25JbiAtPiAnQ3JlYXRlIEFjY291bnQnIGxpbmsgLT4gU2lnblVwXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZUF1dGhTdGF0ZUNoYW5nZSA9IGRpc3BhdGNoQXV0aFN0YXRlQ2hhbmdlRXZlbnQ7XG4gICAgICAgIHRoaXMuZmVkZXJhdGVkU2lnbkluID0gZnVuY3Rpb24gKGF1dGhSZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIGFjY2Vzc1Rva2VuID0gYXV0aFJlc3BvbnNlLmFjY2Vzc1Rva2VuLCBleHBpcmVzSW4gPSBhdXRoUmVzcG9uc2UuZXhwaXJlc0luO1xuICAgICAgICAgICAgaWYgKCFhY2Nlc3NUb2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghQXV0aCB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBBdXRoLmZlZGVyYXRlZFNpZ25JbiAhPT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAgICAgICAgIHR5cGVvZiBBdXRoLmN1cnJlbnRBdXRoZW50aWNhdGVkVXNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT19BVVRIX01PRFVMRV9GT1VORCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB2YXIgZXhwaXJlc19hdCA9IGV4cGlyZXNJbiAqIDEwMDAgKyBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciBmaWVsZHMgPSAnbmFtZSxlbWFpbCc7XG4gICAgICAgICAgICB3aW5kb3dbJ0ZCJ10uYXBpKCcvbWUnLCB7IGZpZWxkczogZmllbGRzIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB1c2VyLCBhdXRoZW50aWNhdGVkVXNlcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByZXNwb25zZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogcmVzcG9uc2UuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBBdXRoLmZlZGVyYXRlZFNpZ25JbignZmFjZWJvb2snLCB7IHRva2VuOiBhY2Nlc3NUb2tlbiwgZXhwaXJlc19hdDogZXhwaXJlc19hdCB9LCB1c2VyKV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEF1dGguY3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyKCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0ZWRVc2VyID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlKEF1dGhTdGF0ZS5TaWduZWRJbiwgYXV0aGVudGljYXRlZFVzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7IH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldExvZ2luU3RhdHVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93WydGQiddLmdldExvZ2luU3RhdHVzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShBVVRIX1NPVVJDRV9LRVksIEpTT04uc3RyaW5naWZ5KHsgcHJvdmlkZXI6ICdmYWNlYm9vaycgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIkMi5kZWJ1ZygnRmFpbGVkIHRvIGNhY2hlIGF1dGggc291cmNlIGludG8gbG9jYWxTdG9yYWdlJywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5mZWRlcmF0ZWRTaWduSW4ocmVzcG9uc2UuYXV0aFJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RoaXMubG9naW4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNjb3BlID0gJ3B1YmxpY19wcm9maWxlLGVtYWlsJztcbiAgICAgICAgICAgIHdpbmRvd1snRkInXS5sb2dpbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuYXV0aFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZlZGVyYXRlZFNpZ25JbihyZXNwb25zZS5hdXRoUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHsgc2NvcGU6IHNjb3BlIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVycy5mYWNlYm9vay5jb20vZG9jcy9qYXZhc2NyaXB0L3JlZmVyZW5jZS9GQi5pbml0L3Y1LjBcbiAgICAgKi9cbiAgICBjbGFzc18zLnByb3RvdHlwZS5zaWduSW5XaXRoRmFjZWJvb2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgd2luZG93WydGQiddLmluaXQoe1xuICAgICAgICAgICAgYXBwSWQ6IHRoaXMuYXBwSWQsXG4gICAgICAgICAgICBjb29raWU6IHRydWUsXG4gICAgICAgICAgICB4ZmJtbDogZmFsc2UsXG4gICAgICAgICAgICB2ZXJzaW9uOiAndjUuMCcsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldExvZ2luU3RhdHVzKCk7XG4gICAgfTtcbiAgICBjbGFzc18zLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChcImFtcGxpZnktc2lnbi1pbi1idXR0b25cIiwgeyBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLnNpZ25JbldpdGhGYWNlYm9vayhldmVudCk7IH0sIHByb3ZpZGVyOiBcImZhY2Vib29rXCIgfSwgaChcInNjcmlwdFwiLCB7IGFzeW5jOiB0cnVlLCBkZWZlcjogdHJ1ZSwgc3JjOiBcImh0dHBzOi8vY29ubmVjdC5mYWNlYm9vay5uZXQvZW5fVVMvc2RrLmpzXCIgfSksIEkxOG4uZ2V0KFRyYW5zbGF0aW9ucy5TSUdOX0lOX1dJVEhfRkFDRUJPT0spKSk7XG4gICAgfTtcbiAgICByZXR1cm4gY2xhc3NfMztcbn0oKSk7XG52YXIgbG9nZ2VyJDMgPSBuZXcgQ29uc29sZUxvZ2dlcignYW1wbGlmeS1nb29nbGUtYnV0dG9uJyk7XG52YXIgQW1wbGlmeUdvb2dsZUJ1dHRvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjbGFzc180KGhvc3RSZWYpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICAgICAgLyoqIEF1dGggc3RhdGUgY2hhbmdlIGhhbmRsZXIgZm9yIHRoaXMgY29tcG9uZW50XG4gICAgICAgICAqIGUuZy4gU2lnbkluIC0+ICdDcmVhdGUgQWNjb3VudCcgbGluayAtPiBTaWduVXBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlQXV0aFN0YXRlQ2hhbmdlID0gZGlzcGF0Y2hBdXRoU3RhdGVDaGFuZ2VFdmVudDtcbiAgICAgICAgdGhpcy5oYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2lkZW50aXR5L3NpZ24taW4vd2ViL2J1aWxkLWJ1dHRvbiNidWlsZGluZ19hX2J1dHRvbl93aXRoX2FfY3VzdG9tX2dyYXBoaWNcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFuZGxlTG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvd1snZ2FwaSddLmxvYWQoJ2F1dGgyJyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFuZGxlVXNlciA9IGZ1bmN0aW9uICh1c2VyKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIGlkX3Rva2VuLCBleHBpcmVzX2F0LCBwcm9maWxlLCBhdXRoZW50aWNhdGVkVXNlcjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXV0aCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBBdXRoLmZlZGVyYXRlZFNpZ25JbiAhPT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBBdXRoLmN1cnJlbnRBdXRoZW50aWNhdGVkVXNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihOT19BVVRIX01PRFVMRV9GT1VORCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShBVVRIX1NPVVJDRV9LRVksIEpTT04uc3RyaW5naWZ5KHsgcHJvdmlkZXI6ICdnb29nbGUnIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyJDMuZGVidWcoJ0ZhaWxlZCB0byBjYWNoZSBhdXRoIHNvdXJjZSBpbnRvIGxvY2FsU3RvcmFnZScsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB1c2VyLmdldEF1dGhSZXNwb25zZSgpLCBpZF90b2tlbiA9IF9hLmlkX3Rva2VuLCBleHBpcmVzX2F0ID0gX2EuZXhwaXJlc19hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGUgPSB1c2VyLmdldEJhc2ljUHJvZmlsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgQXV0aC5mZWRlcmF0ZWRTaWduSW4oJ2dvb2dsZScsIHsgdG9rZW46IGlkX3Rva2VuLCBleHBpcmVzX2F0OiBleHBpcmVzX2F0IH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHByb2ZpbGUuZ2V0RW1haWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcHJvZmlsZS5nZXROYW1lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpY3R1cmU6IHByb2ZpbGUuZ2V0SW1hZ2VVcmwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIEF1dGguY3VycmVudEF1dGhlbnRpY2F0ZWRVc2VyKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVkVXNlciA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVBdXRoU3RhdGVDaGFuZ2UoQXV0aFN0YXRlLlNpZ25lZEluLCBhdXRoZW50aWNhdGVkVXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgfVxuICAgIGNsYXNzXzQucHJvdG90eXBlLmdldEF1dGhJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHdpbmRvd1snZ2FwaSddICYmIHdpbmRvd1snZ2FwaSddLmF1dGgyKSB7XG4gICAgICAgICAgICByZXR1cm4gKHdpbmRvd1snZ2FwaSddLmF1dGgyLmdldEF1dGhJbnN0YW5jZSgpIHx8XG4gICAgICAgICAgICAgICAgd2luZG93WydnYXBpJ10uYXV0aDIuaW5pdCh7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgY29va2llcG9saWN5OiAnc2luZ2xlX2hvc3Rfb3JpZ2luJyxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICdwcm9maWxlIGVtYWlsIG9wZW5pZCcsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgY2xhc3NfNC5wcm90b3R5cGUuc2lnbkluV2l0aEdvb2dsZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmdldEF1dGhJbnN0YW5jZSgpXG4gICAgICAgICAgICAuc2lnbkluKClcbiAgICAgICAgICAgIC50aGVuKHRoaXMuaGFuZGxlVXNlcilcbiAgICAgICAgICAgIC5jYXRjaCh0aGlzLmhhbmRsZUVycm9yKTtcbiAgICB9O1xuICAgIGNsYXNzXzQucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIChoKFwiYW1wbGlmeS1zaWduLWluLWJ1dHRvblwiLCB7IG9uQ2xpY2s6IGZ1bmN0aW9uIChldmVudCkgeyByZXR1cm4gX3RoaXMuc2lnbkluV2l0aEdvb2dsZShldmVudCk7IH0sIHByb3ZpZGVyOiBcImdvb2dsZVwiIH0sIGgoXCJzY3JpcHRcIiwgeyBvbkxvYWQ6IHRoaXMuaGFuZGxlTG9hZCwgc3JjOiBcImh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaTpjbGllbnQuanNcIiB9KSwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLlNJR05fSU5fV0lUSF9HT09HTEUpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gY2xhc3NfNDtcbn0oKSk7XG52YXIgQW1wbGlmeU9BdXRoQnV0dG9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEFtcGxpZnlPQXV0aEJ1dHRvbihob3N0UmVmKSB7XG4gICAgICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgICAgIC8qKiBGZWRlcmF0ZWQgY3JlZGVudGlhbHMgJiBjb25maWd1cmF0aW9uLiAqL1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHt9O1xuICAgIH1cbiAgICBBbXBsaWZ5T0F1dGhCdXR0b24ucHJvdG90eXBlLnNpZ25JbldpdGhPQXV0aCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBBdXRoLmZlZGVyYXRlZFNpZ25JbigpO1xuICAgIH07XG4gICAgQW1wbGlmeU9BdXRoQnV0dG9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiAoaChcImFtcGxpZnktc2lnbi1pbi1idXR0b25cIiwgeyBvbkNsaWNrOiBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIF90aGlzLnNpZ25JbldpdGhPQXV0aChldmVudCk7IH0sIHByb3ZpZGVyOiBcIm9hdXRoXCIgfSwgdGhpcy5jb25maWcubGFiZWwgfHwgSTE4bi5nZXQoVHJhbnNsYXRpb25zLlNJR05fSU5fV0lUSF9BV1MpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQW1wbGlmeU9BdXRoQnV0dG9uO1xufSgpKTtcbmV4cG9ydCB7IEFtcGxpZnlBbWF6b25CdXR0b24gYXMgYW1wbGlmeV9hbWF6b25fYnV0dG9uLCBBbXBsaWZ5QXV0aDBCdXR0b24gYXMgYW1wbGlmeV9hdXRoMF9idXR0b24sIEFtcGxpZnlGYWNlYm9va0J1dHRvbiBhcyBhbXBsaWZ5X2ZhY2Vib29rX2J1dHRvbiwgQW1wbGlmeUdvb2dsZUJ1dHRvbiBhcyBhbXBsaWZ5X2dvb2dsZV9idXR0b24sIEFtcGxpZnlPQXV0aEJ1dHRvbiBhcyBhbXBsaWZ5X29hdXRoX2J1dHRvbiB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@aws-amplify/ui-components/dist/esm-es5/amplify-amazon-button_5.entry.js\n"));

/***/ })

}]);